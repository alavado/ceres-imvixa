import centros from './datos_centros.json'

const centrosFormateados = centros['cod_centro'].map((codigo, i) => ({
  codigo,
  titular: centros['Titular'][i],
  rut: centros['Rut'][i],
  barrio: centros['Barrio'][i],
  posicion: { lng: -Number(centros['coords'][i].split(',')[0]), lat: -Number(centros['coords'][i].split(',')[1]) }
}))

const macrozonas = {
  "1": ["1", "2", "3 A", "3 B", "4"],
  "2": ["5", "6"],
  "3": ["7", "8", "9 A", "9 B", "9 C", "10 A", "10 B"],
  "5": ["17 B", "17 A", "16", "15", "14", "13"],
  "4": ["11", "12 A", "12 B", "12 C"],
  "6": ["18 A", "18 B", "18 C", "18 D", "19 C", "19 A", "19 B", "20", "21 A", "21 B", "21 C", "21 D"],
  "8": ["35", "34", "33", "31 B", "32", "31 A", "30 A", "30 B"],
  "7": ["22 A", "22 C", "22 B", "22 D", "29", "28 A", "28 B", "28 C", "23 A", "23 B", "23 C", "24", "27", "26 A", "26 B", "25", "25 A", "25 B"]
}

const barrios = [
  "1", "2", "3 A", "3 B", "4",
  "5", "6",
  "7", "8", "9 A", "9 B", "9 C", "10 A", "10 B",
  "17 B", "17 A", "16", "15", "14", "13",
  "11", "12 A", "12 B", "12 C",
  "18 A", "18 B", "18 C", "18 D", "19 C", "19 A", "19 B", "20", "21 A", "21 B", "21 C", "21 D",
  "35", "34", "33", "31 B", "32", "31 A", "30 A", "30 B",
  "22 A", "22 C", "22 B", "22 D", "29", "28 A", "28 B", "28 C", "23 A", "23 B", "23 C", "24", "27", "26 A", "26 B", "25", "25 A", "25 B"
]

const posicionesBarrios = {
  "1": { lat: -41.581994, lng: -72.336437},
  "2": { lat: -41.658612, lng: -72.775383 },
  "3 A": { lat: -41.795094, lng: -73.130014},
  "3 B": { lat: -41.815809, lng: -73.280311},
  "4": { lat: -41.619610, lng: -73.736259},
  "5": { lat: -41.830614, lng: -73.800711},
  "6": { lat: -41.941214, lng: -73.464155},
  "7": { lat: -42.164952, lng: -73.335862},
  "8": { lat: -42.336935, lng: -73.170996},
  "9 A": { lat: -42.405900, lng: -73.481487},
  "9 B": { lat: -42.442201, lng: -73.250967},
  "9 C": { lat: -42.589948, lng: -73.179090},
  "10 A": { lat: -42.594960, lng: -73.443570},
  "10 B": { lat: -42.734599, lng: -73.468413},
  "17 B": { lat: -42.050064, lng: -72.675830},
  "17 A": { lat: -42.268875, lng: -72.483857},
  "16": { lat: -42.464380, lng: -72.758835},
  "15": { lat: -42.684167, lng: -72.963171},
  "14": { lat: -42.908825, lng: -72.815424},
  "13": { lat: -43.210884, lng: -72.945016},
  "11": { lat: -43.015421, lng: -73.455978},
  "12 A": { lat: -43.227895, lng: -73.540611},
  "12 B": { lat: -43.417879, lng: -73.764594},
  "12 C": { lat: -43.410239, lng: -74.003869},
  "18 A": { lat: -43.980684, lng: -73.980371},
  "18 B": { lat: -44.203737, lng: -73.507643},
  "18 C": { lat: -44.165646, lng: -73.767103},
  "18 D": { lat: -44.558732, lng: -73.582709},
  "19 C": { lat: -44.103380, lng: -74.012260},
  "19 A": { lat: -44.199854, lng: -74.398469},
  "19 B": { lat: -44.417322, lng: -74.404096},
  "20": { lat: -44.558715, lng: -74.550498},
  "21 A": { lat: -44.786932, lng: -74.565463},
  "21 B": { lat: -44.847699, lng: -73.585720},
  "21 C": { lat: -44.948364, lng: -73.641706},
  "21 D": { lat: -44.948364, lng: -73.641706}, // no estaba en el mapa de aquabench
  "35": { lat: -43.778714, lng: -73.015557},
  "34": { lat: -43.868222, lng: -73.171068},
  "33": { lat: -44.363447, lng: -72.953697},
  "31 B": { lat: -44.469701, lng: -73.302618},
  "32": { lat: -44.651370, lng: -72.758394},
  "31 A": { lat: -44.790220, lng: -73.404449},
  "30 A": { lat: -44.964005, lng: -73.418203},
  "30 B": { lat: -45.136642, lng: -73.625393},
  "22 A": { lat: -45.197201, lng: -74.198935},
  "22 C": { lat: -45.273352, lng: -74.397360},
  "22 B": { lat: -45.260344, lng: -73.943382},
  "22 D": { lat: -45.452005, lng: -74.272674},
  "29": { lat: -45.340015, lng: -73.727308},
  "28 A": { lat: -45.369523, lng: -73.393908},
  "28 B": { lat: -45.354827, lng: -73.096252},
  "28 C": { lat: -45.354827, lng: -73.096252}, // este tampoco estaba
  "23 A": { lat: -45.551660, lng: -74.048306},
  "23 B": { lat: -45.704577, lng: -74.133502},
  "23 C": { lat: -45.742402, lng: -74.831763},
  "24": { lat: -45.728622, lng: -73.825792},
  "27": { lat: -45.686861, lng: -73.382311},
  "26 A": { lat: -45.874329, lng: -73.622869},
  "26 B": { lat: -45.423501, lng: -73.536530},
  "25": { lat: -46.209808, lng: -73.546964},
  "25 A": { lat: -46.209808, lng: -73.546964}, // estos dos tampoco
  "25 B": { lat: -46.209808, lng: -73.546964}
}

const modelosMortalidadBarrios = {
  "10 A": {"coefs": [0.0, 0.00018944773171668895, 1.23926504080418e-07], "intercepto": 0.0029088015358008784},
  "11": {"coefs": [0.0, 0.0001324086882244983, 3.4127281295120055e-07], "intercepto": 0.011645722137144293},
  "12 A": {"coefs": [0.0, 0.0003071944965886453, 4.64376241210526e-08], "intercepto": 0.003608859411141585},
  "12 B": {"coefs": [0.0, 0.00020723595351585284, 2.8608452714436067e-09], "intercepto": 0.002851581413121175},
  "16": {"coefs": [0.0, -6.6259740469767245e-06, 3.470842838268218e-07], "intercepto": 0.008390293562149428},
  "18 C": {"coefs": [0.0, 0.00027201328389082435, 2.0229202751818293e-07], "intercepto": 0.004934509971123685},
  "18 D": {"coefs": [0.0, 0.0002938566342970651, 8.253662354967759e-08], "intercepto": 0.008582132473536022},
  "19 A": {"coefs": [0.0, 0.00020426604841564528, 1.385767689235091e-07], "intercepto": 0.010663851739195228},
  "21 B": {"coefs": [0.0, 7.67807792655466e-05, 6.903616161343503e-07], "intercepto": 0.020530587556649688},
  "21 C": {"coefs": [0.0, 0.0001742031462382818, 8.60379223523191e-08], "intercepto": 0.012647364715269754},
  "22 A": {"coefs": [0.0, 5.477467200691604e-05, 4.882431713368533e-07], "intercepto": 0.00835944343228781},
  "22 B": {"coefs": [0.0, 0.0001321950211772833, 4.403601071960321e-07], "intercepto": 0.005750519721397507},
  "22 C": {"coefs": [0.0, 0.0004110303564040546, -3.3419078273406515e-07], "intercepto": -0.0013537564052463341},
  "23 B": {"coefs": [0.0, 0.0004449908668962655, -1.9339077892061904e-07], "intercepto": 0.014815642485740951},
  "24": {"coefs": [0.0, 0.00012728704490766842, 5.598159882394812e-08], "intercepto": 0.005568147935737719},
  "25 B": {"coefs": [0.0, 6.567007230295801e-05, 9.939362831240989e-08], "intercepto": 0.011932550183415741},
  "3 B": {"coefs": [0.0, 6.867259748744024e-05, 4.2005264065874737e-07], "intercepto": 0.010645819774563747},
  "30 A": {"coefs": [0.0, 0.00018835022697860691, -3.134692264519047e-08], "intercepto": -0.00017507980499508607},
  "33": {"coefs": [0.0, 0.00019123475355196993, 3.5959866260984306e-07], "intercepto": 0.015046278987469436},
  "6": {"coefs": [0.0, 3.077962893732444e-05, 1.330732801920674e-07], "intercepto": 0.0052083643490512775}
}

const modelosMortalidadMacrozonas = {
  "3": {"coefs": [0.0, 0.00018944773171668895, 1.23926504080418e-07], "intercepto": 0.0029088015358008784},
  "4": {"coefs": [0.0, 0.0001324086882244983, 3.4127281295120055e-07], "intercepto": 0.011645722137144293},
  "5": {"coefs": [0.0, -6.6259740469767245e-06, 3.470842838268218e-07], "intercepto": 0.008390293562149428},
  "6": {"coefs": [0.0, 0.00027201328389082435, 2.0229202751818293e-07], "intercepto": 0.004934509971123685},
  "7": {"coefs": [0.0, 5.477467200691604e-05, 4.882431713368533e-07], "intercepto": 0.00835944343228781},
  "1": {"coefs": [0.0, 6.867259748744024e-05, 4.2005264065874737e-07], "intercepto": 0.010645819774563747},
  "8": {"coefs": [0.0, 0.00018835022697860691, -3.134692264519047e-08], "intercepto": -0.00017507980499508607},
  "2": {"coefs": [0.0, 3.077962893732444e-05, 1.330732801920674e-07], "intercepto": 0.0052083643490512775}
}

export default barrios.filter(nombre => centrosFormateados.filter(centro => centro.barrio === nombre.replace(' ', '')).length > 0).map(nombre => {
  let modeloMortalidad = modelosMortalidadBarrios[Object.keys(modelosMortalidadBarrios).find(k => k === nombre)]
  if (!modeloMortalidad) {
    modeloMortalidad = modelosMortalidadMacrozonas[Object.keys(macrozonas).find(k => macrozonas[k].find(b => b === nombre))]
  }
  return {
    nombre,
    posicion: posicionesBarrios[Object.keys(posicionesBarrios).find(key => key === nombre)],
    macrozona: Object.keys(macrozonas)
      .find(key => macrozonas[key].find(b => b === nombre)),
    modeloMortalidad,
    centros: centrosFormateados.filter(centro => centro.barrio === nombre.replace(' ', ''))
  }
})